module test;

import stdio local;
import plugin_main;

public fn i32 main() {
#if 0
    u32 len1 = elemsof(plugin_main.array1);
#else
    u32 len1 = 3;
#endif
    printf("i32[%d] plugin1.array1 = {", len1);
    for (u32 i = 0; i < len1; i++) {
        printf("%d, ", plugin_main.array1[i]);
    }
    printf("};\n");

#if 0
    u32 len2 = elemsof(plugin_main.array2);
#else
    // length of incremental arrays is not exposed in the interface
    u32 len2 = 4;
#endif
    printf("i32[%d] plugin1.array2 = {", len2);
    for (u32 i = 0; i < len2; i++) {
        printf("%d, ", plugin_main.array2[i]);
    }
    printf("};\n");

#if 0
    u32 len3 = elemsof(plugin_main.array3);
#else
    // length of incremental arrays is not exposed in the interface
    u32 len3 = 5;
#endif
    printf("i32[%d] plugin1.array3 = {", len3);
    for (u32 i = 0; i < len3; i++) {
        printf("%d, ", plugin_main.array3[i]);
    }
    printf("};\n");

    return 0;
}

